<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link href="./output.css" rel="stylesheet">
  </head>
  <body class="flex flex-col items-center h-screen justify-center bg-blue-800 ">
    <form id="urlForm">
      <label for="url" class="text-slate-400 text-xl">Enter your url : </label>
      <input type="text" name="url" id="url" placeholder="enter your url" class="h-10 rounded-md bg-cyan-500 text-white"/>
      <button type="submit" class="bg-cyan-400 p-2 rounded-lg">Submit</button>
    </form>
    <div>
      <div class="mt-10 text-xl">
        <p>Your valid short url is : </p>
        <p id="output"></p>
      </div>
    </div>
    <script>
      document.getElementById('urlForm').addEventListener('submit',async (e) => {
        e.preventDefault();
        const formData = new FormData(e.target);
        const data = Object.fromEntries(formData.entries());
        console.log(data);
        console.log(JSON.stringify(data));
        try {
          const response = await fetch("http://localhost:5500/url", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          });
          if (response.ok) {
            const result = await response.json();
            console.log("Success:", result);
            const output = document.getElementById('output')
            output.innerHTML = `http://localhost:5500/url/${result.shortUrl}`
          } else {
            console.error("Error:", response.statusText);
          }
        } catch (error) {
          console.error(error);
        }
      })
    </script>
  </body>
</html>
